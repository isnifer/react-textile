!function(t,a,e,s){var i=document.querySelector(".main"),r="data.json",n=a.createClass({displayName:"Main",getInitialState:function(){return{data:[]}},loadData:function(){e.ajax({url:this.props.url,dataType:"json",success:function(t){this.setState({data:t})}.bind(this),error:function(t,a,e){console.error(t,a,e)}})},sizeCallback:function(t){var a=this.state.data,e=a[t.productId],s=e.variants[t.variantId],i=s.sizes[t.key];e.count+=t.count,e.value+=t.value,i.count+=t.count,i.value+=t.value,this.setState({data:a})},componentDidMount:function(){this.loadData();var t={"/product/:id":function(t){e(".product_state_visible").removeClass("product_state_visible"),e(".product_"+t).addClass("product_state_visible")}},a=s(t);a.init()},render:function(){return a.DOM.div({className:"main__wrapper"},p({data:this.state.data}),o({data:this.state.data,sizeCallback:this.sizeCallback}))}}),p=a.createClass({displayName:"Sidebar",render:function(){var t=this.props.data.reduce(function(t,a){return t+a.value},0),e=this.props.data.map(function(t,a){return c({url:"#/product/"+a,title:t.title,key:a,value:t.value,count:t.count})});return a.DOM.div({className:"sidebar"},a.DOM.div({className:"sidebar__list"},e),a.DOM.div({className:"sidebar__all"},"Всего на ",t," руб."),a.DOM.button({type:"button",className:"sidebar__btn btn btn-success"},"Отправить заказ менеджеру"))}}),c=a.createClass({displayName:"SidebarItem",render:function(){return a.DOM.div({className:"sidebar__item"},a.DOM.a({className:"sidebar__link",href:this.props.url},this.props.title),a.DOM.div({className:"sidebar__choose"},"Выбрано ",this.props.count," комплектов на ",this.props.value," руб."))}}),o=a.createClass({displayName:"Content",render:function(){var t=this,e=this.props.data.map(function(a,e){return l({sizeCallback:t.props.sizeCallback,key:e,title:a.title,variants:a.variants,value:a.value})});return a.DOM.div({className:"content"},e)}}),l=a.createClass({displayName:"Product",render:function(){var t=this,e=this.props.variants.map(function(a,e){return d({title:a.title,sizes:a.sizes,key:e,productId:t.props.key,parentTitle:t.props.title,sizeCallback:t.props.sizeCallback})}),s=this.props.variants[0].sizes.map(function(a,e){return u({title:a.title,key:e,variants:t.props.variants,productId:t.props.key})});return a.DOM.div({className:0===this.props.key?"product product_"+this.props.key+" product_state_visible":"product product_"+this.props.key},a.DOM.div({className:"product__stat g-clf"},a.DOM.div({className:"product__title"},this.props.title),a.DOM.div({className:"product__overall"},a.DOM.div({className:"product__overall-title"},"Общее количество:"),s),a.DOM.div({className:"product__overall-value"},"= ",this.props.value," руб.")),a.DOM.div({className:"product__variants"},e))}}),u=a.createClass({displayName:"ProductOverallItem",getInitialState:function(){return{count:0}},render:function(){var t=this;return a.DOM.div({className:"product__overall-item"},a.DOM.div({className:"product__overall-item-title"},this.props.title),a.DOM.div({className:"product__overall-item-count"},this.props.variants.reduce(function(a,e){return a+e.sizes[t.props.key].count},0)))}}),d=a.createClass({displayName:"Variant",render:function(){var t=this,e=this.props.sizes.map(function(a,e){return v({title:a.title,price:a.price,key:e,variantId:t.props.key,productId:t.props.productId,active:a.active,parentTitle:t.props.parentTitle,sizeCallback:t.props.sizeCallback})});return a.DOM.div({className:"variant g-clf"},a.DOM.div({className:"variant__info"},a.DOM.div({className:"variant__title"},this.props.title),a.DOM.img({src:"assets/img/150x150.gif"})),a.DOM.div({className:"variant__sizes g-clf"},e),a.DOM.div({className:"variant__overall"},"= ",this.props.sizes.reduce(function(t,a){return t+a.value},0)," руб."))}}),v=a.createClass({displayName:"VariantSize",getInitialState:function(){return{count:0,value:0}},changeValue:function(t){this.setState({count:t.target.value,value:t.target.value*this.props.price}),this.props.sizeCallback({size:this,count:t.target.value-this.state.count,value:(t.target.value-this.state.count)*this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},plusValue:function(){var t=this.state.count+1,a=t*this.props.price;this.setState({count:t,value:a}),this.props.sizeCallback({size:this,count:1,value:this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},minusValue:function(){var t=0===this.state.count?0:this.state.count-1,a=t*this.props.price;this.setState({count:t,value:a}),this.props.sizeCallback({size:this,count:0===this.state.count?0:-1,value:0===this.state.count?0:-this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},render:function(){return a.DOM.div({className:this.props.active?"size":"size size_state_inactive"},a.DOM.p({className:"size__title"},this.props.title),a.DOM.p({className:"size__price"},this.props.price,".-"),a.DOM.p({className:"size__counter g-clf"},a.DOM.i({className:"size__changer glyphicon glyphicon-minus",onClick:this.props.active?this.minusValue:!1}),a.DOM.input({type:"text",className:"size__input",maxLength:"4",value:this.state.count,disabled:!this.props.active,onChange:this.changeValue}),a.DOM.i({className:"size__changer glyphicon glyphicon-plus",onClick:this.props.active?this.plusValue:!1})),a.DOM.p({className:"size__value"},this.state.value,".-"))}});a.renderComponent(n({url:r}),i)}(window,window.React,window.jQuery,window.Router);