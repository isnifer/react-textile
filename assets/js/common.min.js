!function(t,s,a,e){var i=document.querySelector(".main"),r="data.json",n=s.createClass({displayName:"Main",getInitialState:function(){return{data:[]}},loadData:function(){a.ajax({url:this.props.url,dataType:"json",success:function(t){this.setState({data:t})}.bind(this),error:function(t,s,a){console.error(t,s,a)}})},sizeCallback:function(t){var s=this.state.data,a=s[t.productId],e=a.variants[t.variantId],i=e.sizes[t.key];a.count+=t.count,a.value+=t.value,i.count+=t.count,i.value+=t.value,this.setState({data:s})},componentDidMount:function(){this.loadData();var t={"/product/:id":function(t){a(".product_state_visible").removeClass("product_state_visible"),a(".product_"+t).addClass("product_state_visible")}},s=e(t);s.init()},render:function(){return s.DOM.div({className:"main__wrapper"},p({data:this.state.data}),o({data:this.state.data,sizeCallback:this.sizeCallback}))}}),p=s.createClass({displayName:"Sidebar",render:function(){var t=this.props.data.reduce(function(t,s){return t+s.value},0),a=this.props.data.map(function(t,s){return c({url:"#/product/"+s,title:t.title,key:s,value:t.value,count:t.count})});return s.DOM.div({className:"sidebar"},s.DOM.div({className:"sidebar__list"},a),s.DOM.div({className:"sidebar__all"},"Всего на ",t," руб."),s.DOM.button({type:"button",className:"sidebar__btn btn btn-success"},"Отправить заказ менеджеру"))}}),c=s.createClass({displayName:"SidebarItem",render:function(){return s.DOM.div({className:"sidebar__item"},s.DOM.a({className:"sidebar__link",href:this.props.url},this.props.title),s.DOM.div({className:"sidebar__choose"},"Выбрано ",this.props.count," комплектов на ",this.props.value," руб."))}}),o=s.createClass({displayName:"Content",render:function(){var t=this,a=this.props.data.map(function(s,a){return l({sizeCallback:t.props.sizeCallback,key:a,title:s.title,variants:s.variants,value:s.value})});return s.DOM.div({className:"content"},a)}}),l=s.createClass({displayName:"Product",render:function(){var t=this,a=this.props.variants.map(function(s,a){return d({title:s.title,sizes:s.sizes,key:a,productId:t.props.key,parentTitle:t.props.title,sizeCallback:t.props.sizeCallback,img:s.picture})}),e=this.props.variants[0].sizes.map(function(s,a){return u({title:s.title,key:a,variants:t.props.variants,productId:t.props.key})});return s.DOM.div({className:0===this.props.key?"product product_"+this.props.key+" product_state_visible":"product product_"+this.props.key},s.DOM.div({className:"product__stat g-clf"},s.DOM.div({className:"product__title"},this.props.title),s.DOM.div({className:"product__overall"},s.DOM.div({className:"product__overall-title"},"Общее количество:"),e),s.DOM.div({className:"product__overall-value"},"= ",this.props.value," руб.")),s.DOM.div({className:"product__variants"},a))}}),u=s.createClass({displayName:"ProductOverallItem",getInitialState:function(){return{count:0}},render:function(){var t=this;return s.DOM.div({className:"product__overall-item"},s.DOM.div({className:"product__overall-item-title"},this.props.title),s.DOM.div({className:"product__overall-item-count"},this.props.variants.reduce(function(s,a){return s+a.sizes[t.props.key].count},0)))}}),d=s.createClass({displayName:"Variant",render:function(){var t=this,a=this.props.sizes.map(function(s,a){return v({title:s.title,price:s.price,key:a,variantId:t.props.key,productId:t.props.productId,active:s.active,parentTitle:t.props.parentTitle,sizeCallback:t.props.sizeCallback})});return s.DOM.div({className:"variant g-clf"},s.DOM.div({className:"variant__info"},s.DOM.div({className:"variant__title"},this.props.title),s.DOM.img({src:this.props.img||"assets/img/150x150.gif"})),s.DOM.div({className:"variant__sizes g-clf"},a),s.DOM.div({className:"variant__overall"},"= ",this.props.sizes.reduce(function(t,s){return t+s.value},0)," руб."))}}),v=s.createClass({displayName:"VariantSize",getInitialState:function(){return{count:0,value:0}},changeValue:function(t){this.setState({count:t.target.value,value:t.target.value*this.props.price}),this.props.sizeCallback({size:this,count:t.target.value-this.state.count,value:(t.target.value-this.state.count)*this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},plusValue:function(){var t=this.state.count+1,s=t*this.props.price;this.setState({count:t,value:s}),this.props.sizeCallback({size:this,count:1,value:this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},minusValue:function(){var t=0===this.state.count?0:this.state.count-1,s=t*this.props.price;this.setState({count:t,value:s}),this.props.sizeCallback({size:this,count:0===this.state.count?0:-1,value:0===this.state.count?0:-this.props.price,productId:this.props.productId,variantId:this.props.variantId,key:this.props.key})},render:function(){return s.DOM.div({className:this.props.active?"size":"size size_state_inactive"},s.DOM.p({className:"size__title"},this.props.title),s.DOM.p({className:"size__price"},this.props.price,".-"),s.DOM.p({className:"size__counter g-clf"},s.DOM.i({className:"size__changer glyphicon glyphicon-minus",onClick:this.props.active?this.minusValue:!1}),s.DOM.input({type:"text",className:"size__input",maxLength:"4",value:this.state.count,disabled:!this.props.active,onChange:this.changeValue}),s.DOM.i({className:"size__changer glyphicon glyphicon-plus",onClick:this.props.active?this.plusValue:!1})),s.DOM.p({className:"size__value"},this.state.value,".-"))}});s.renderComponent(n({url:r}),i)}(window,window.React,window.jQuery,window.Router);